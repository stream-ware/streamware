# =============================================================================
# Streamware Configuration
# Copy this file to .env and customize as needed
# =============================================================================

# -----------------------------------------------------------------------------
# AI / LLM Settings
# -----------------------------------------------------------------------------
# Default AI model for vision analysis
# Fast: moondream (~300ms, less accurate), Balanced: llava:7b (~1.5s, good), Accurate: llava:13b (~3s, best)
# Install: ollama pull llava:7b
SQ_MODEL=llava:7b

# Ollama server URL
SQ_OLLAMA_URL=http://localhost:11434

# OpenAI API Key (for GPT models)
SQ_OPENAI_API_KEY=

# Anthropic API Key (for Claude models)
SQ_ANTHROPIC_API_KEY=

# Default LLM provider: ollama, openai, anthropic
SQ_LLM_PROVIDER=ollama

# Response validation with small LLM (reduces noise in logs)
# Fast: gemma:2b (~0.5-1s), Balanced: qwen2.5:3b (~1-2s)
# Install with: ollama pull gemma:2b
SQ_GUARDER_MODEL=gemma:2b
SQ_USE_GUARDER=true

# -----------------------------------------------------------------------------
# Stream Analysis Settings
# -----------------------------------------------------------------------------
# Default analysis mode: full, diff, track
# track = intelligent movement tracking (entering, exiting, direction)
# diff = only describe changes between frames
# full = describe everything in each frame
SQ_STREAM_MODE=track

# Default interval between frames (seconds)
SQ_STREAM_INTERVAL=3

# Default duration (seconds, 0=infinite)
SQ_STREAM_DURATION=30

# Default focus for detection: person, animal, vehicle, face, motion, package, intrusion
# For track mode: person is recommended for best movement analysis
SQ_STREAM_FOCUS=person

# Default sensitivity: low, medium, high
SQ_STREAM_SENSITIVITY=medium

# Save frames to this directory (empty = temp dir)
SQ_STREAM_FRAMES_DIR=

# -----------------------------------------------------------------------------
# Network Scanning Settings
# -----------------------------------------------------------------------------
# Default subnet to scan (empty = auto-detect)
SQ_NETWORK_SUBNET=

# Scan timeout (seconds)
SQ_NETWORK_TIMEOUT=10

# Enable deep scan by default
SQ_NETWORK_DEEP=false

# -----------------------------------------------------------------------------
# Camera / RTSP Defaults
# -----------------------------------------------------------------------------
# Default RTSP username
SQ_RTSP_USER=admin

# Default RTSP password
SQ_RTSP_PASS=admin

# Default RTSP port
SQ_RTSP_PORT=554

# -----------------------------------------------------------------------------
# Keyframe & Optimization Settings
# -----------------------------------------------------------------------------
# Enable keyframe extraction (only analyze changed frames)
SQ_USE_KEYFRAMES=true

# Scene change threshold (0.0-1.0, lower = more sensitive)
SQ_KEYFRAME_THRESHOLD=0.15

# Minimum seconds between keyframes
SQ_KEYFRAME_MIN_INTERVAL=1.0

# Maximum seconds without keyframe (force periodic analysis)
SQ_KEYFRAME_MAX_INTERVAL=10.0

# Enable adaptive scene classification
SQ_ADAPTIVE_SCENE=true

# Enable hierarchical LLM (fast model first, then accurate if needed)
SQ_HIERARCHICAL_LLM=false

# -----------------------------------------------------------------------------
# Image Optimization (for LLM vision processing)
# -----------------------------------------------------------------------------
# Preset: fast, balanced, quality, minimal
SQ_IMAGE_PRESET=balanced

# Maximum image dimension in pixels (width or height)
SQ_IMAGE_MAX_SIZE=512

# JPEG quality (1-100, lower = smaller file)
SQ_IMAGE_QUALITY=65

# Color posterization (0=off, 8-256=reduce to N colors)
SQ_IMAGE_POSTERIZE=0

# Convert to grayscale (reduces data but may hurt color detection)
SQ_IMAGE_GRAYSCALE=false

# -----------------------------------------------------------------------------
# Voice / STT-TTS Settings
# -----------------------------------------------------------------------------
# STT provider: google, whisper_local, whisper_api
SQ_STT_PROVIDER=whisper_local

# Whisper model (for whisper_local): tiny, base, small, medium, large
SQ_WHISPER_MODEL=base

# TTS engine: auto, pyttsx3, espeak, pico, festival, say (macOS), powershell (Windows)
SQ_TTS_ENGINE=auto

# Preferred voice (substring match, e.g., "polski", "English")
SQ_TTS_VOICE=

# Speech rate (words per minute)
SQ_TTS_RATE=150

# -----------------------------------------------------------------------------
# LLM Processing Settings
# -----------------------------------------------------------------------------
# LLM timeout in seconds
SQ_LLM_TIMEOUT=60

# Motion detection threshold (0-100, lower = more sensitive)
SQ_MOTION_THRESHOLD=25

# Minimum motion region size in pixels
SQ_MOTION_MIN_REGION=500

# Frame analysis downscale factor (0.1-1.0, lower = faster but less accurate)
SQ_FRAME_SCALE=0.3

# -----------------------------------------------------------------------------
# Fast Capture Settings (for live narrator optimization)
# -----------------------------------------------------------------------------
# Enable FastCapture for RTSP streams (10x faster than subprocess)
SQ_FAST_CAPTURE=true

# Capture backend: auto (prefers opencv), opencv, ffmpeg
SQ_CAPTURE_BACKEND=auto

# RAM disk path for fast frame storage
SQ_RAMDISK_PATH=/dev/shm/streamware
SQ_RAMDISK_ENABLED=true

# -----------------------------------------------------------------------------
# YOLO Detection Settings (auto-installed on first use)
# -----------------------------------------------------------------------------
# Enable YOLO for fast, accurate object detection
SQ_USE_YOLO=true

# YOLO model size (download size / speed / accuracy):
# yolov8n: 6MB, ~10ms GPU, fastest
# yolov8s: 22MB, ~20ms GPU, fast
# yolov8m: 52MB, ~40ms GPU, balanced
# yolov8l: 87MB, ~60ms GPU, accurate
# yolov8x: 131MB, ~100ms GPU, most accurate
SQ_YOLO_MODEL=yolov8n

# Minimum confidence for YOLO detections (0.0-1.0)
SQ_YOLO_CONFIDENCE=0.25

# -----------------------------------------------------------------------------
# Animal Detection Settings
# -----------------------------------------------------------------------------
# Focus type for animal detection:
# all: detect all animals (birds, cats, dogs, wildlife)
# bird: birds only (optimized for feeders)
# cat: cats only
# dog: dogs only
# pet: cats and dogs
# wildlife: horses, cows, sheep, bears, etc.
SQ_ANIMAL_FOCUS=all

# Minimum detection size (fraction of frame, 0.001 = 0.1%)
# Lower = more sensitive (can detect smaller animals)
# Birds need lower threshold (~0.001-0.003)
SQ_ANIMAL_MIN_SIZE=0.003

# -----------------------------------------------------------------------------
# Output Settings
# -----------------------------------------------------------------------------
# Default output format: yaml, json, table, html
SQ_OUTPUT_FORMAT=yaml

# Reports output directory
SQ_REPORTS_DIR=./reports

# Include base64 images in HTML reports
SQ_REPORT_INCLUDE_IMAGES=true

# -----------------------------------------------------------------------------
# Email Settings (for alerts)
# -----------------------------------------------------------------------------
SQ_SMTP_HOST=smtp.gmail.com
SQ_SMTP_PORT=587
SQ_SMTP_USER=
SQ_SMTP_PASS=
SQ_EMAIL_FROM=
SQ_EMAIL_TO=

# -----------------------------------------------------------------------------
# Slack Settings (for alerts)
# -----------------------------------------------------------------------------
SQ_SLACK_WEBHOOK=
SQ_SLACK_CHANNEL=alerts

# -----------------------------------------------------------------------------
# Telegram Settings (for alerts)
# -----------------------------------------------------------------------------
SQ_TELEGRAM_BOT_TOKEN=
SQ_TELEGRAM_CHAT_ID=

# -----------------------------------------------------------------------------
# Database Settings
# -----------------------------------------------------------------------------
SQ_POSTGRES_HOST=localhost
SQ_POSTGRES_PORT=5432
SQ_POSTGRES_USER=postgres
SQ_POSTGRES_PASS=
SQ_POSTGRES_DB=streamware

# -----------------------------------------------------------------------------
# Kafka Settings
# -----------------------------------------------------------------------------
SQ_KAFKA_BROKERS=localhost:9092
SQ_KAFKA_GROUP_ID=streamware

# -----------------------------------------------------------------------------
# SSH Defaults
# -----------------------------------------------------------------------------
SQ_SSH_USER=
SQ_SSH_KEY=~/.ssh/id_rsa
SQ_SSH_PORT=22

# -----------------------------------------------------------------------------
# Web UI Settings
# -----------------------------------------------------------------------------
SQ_WEB_HOST=0.0.0.0
SQ_WEB_PORT=8080
SQ_WEB_DEBUG=false

# -----------------------------------------------------------------------------
# Logging
# -----------------------------------------------------------------------------
SQ_LOG_LEVEL=INFO
SQ_LOG_FILE=
SQ_LLM_MIN_MOTION_PERCENT=30